#!/usr/bin/env bash

set -o nounset
set -o pipefail

case "${1-}" in
    "all")
        docker images --all | tail -n +2 | sort -f
    ;;
    "cleanup")
        docker rmi $(docker images -q -f dangling=true) 2>/dev/null
        docker system prune -f
    ;;
    "update")
        docker images | grep -v '<none>' | tail -n +2 | awk '{print $1":"$2}' | xargs -n1 docker pull
    ;;
    *)
        docker images | grep -v '<none>'
    ;;
esac
