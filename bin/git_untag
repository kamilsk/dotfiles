#!/usr/bin/env bash

set -o nounset
set -o pipefail
shopt -s extglob

tag=${1:-}

if [ -z "${tag}" ]; then
    (>&2 echo nothing to do)
    exit 1
fi

git tag -d "${tag}" || true

for remote in $(git remote | grep -v upstream); do
    git push "${remote}" :refs/tags/"${tag}"
done

echo done
exit 0
